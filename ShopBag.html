<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="Logo/webLOGOpart_icon_w_TRANSBG.png" type="image/x-icon">
    <title>Linkly - è´­ç‰©è¢‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --bg-color: #f5f5f7;
            --card-bg: #ffffff;
            --text-primary: #1d1d1f;
            --text-secondary: #86868b;
            --accent-blue: #0071e3;
            --border-color: #d2d2d7;
            --nav-blur: rgba(255, 255, 255, 0.8);
        }

        body { 
            background-color: var(--bg-color); 
            color: var(--text-primary); 
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif; 
            -webkit-font-smoothing: antialiased; 
        }

        /* å¯¼èˆªæ  */
        /* é€‚é…æµ…è‰²èƒŒæ™¯çš„ç»ç’ƒå¯¼èˆªæ•ˆæœ */
        .glass-nav {
            background: rgba(255, 255, 255, 0.75); /* æ”¹ä¸ºç™½è‰²åŠé€æ˜ */
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1); /* è¾¹æ¡†æ”¹ä¸ºæ·¡æ·¡çš„é»‘è‰² */
        }

        /* å¯¼èˆªé“¾æ¥æ ·å¼ */
        .navbar-links a {
            color: #1d1d1f; /* æ–‡å­—æ”¹ä¸ºæ·±ç°è‰² */
            text-decoration: none;
            font-size: 0.875rem;
            transition: font-weight 0.3s ease;
        }

        .navbar-links a:hover {
            font-weight: bold;
            color: #0071e3; /* æ‚¬åœä¿æŒè“è‰² (Apple Blue) */
        }

        .navbar-links a.active {
            font-weight: bold;
            color: #000000; /* æ¿€æ´»çŠ¶æ€ä¸ºçº¯é»‘ */
        }

        .navbar-btns a {
            font-size: 0.875rem;
            transition: all 0.3s ease;
        }

        /* â€œè´­ä¹°â€æŒ‰é’®ï¼šæµ…è‰²èƒŒæ™¯ä¸‹é€šå¸¸ç”¨é»‘åº•ç™½å­—ï¼Œæˆ–è€…è“åº•ç™½å­— */
        .navbar-btns .buy-btn {
            background-color: #1d1d1f; /* é»‘åº• */
            color: white; /* ç™½å­— */
        }

        .navbar-btns .buy-btn:hover {
            background-color: #0071e3; /* æ‚¬åœå˜è“ */
            color: white;
            font-weight: bold;
        }

        /* â€œç™»å½•â€æŒ‰é’®æ‚¬åœæ•ˆæœ */
        .navbar-btns .login-btn:hover {
            color: #0071e3;
            font-weight: bold;
        }
        /* å¸ƒå±€ */
        .main-container { max-width: 980px; margin: 0 auto; padding: 100px 20px 140px; min-height: 100vh; }
        
        .bag-header { 
            margin-bottom: 40px; padding-bottom: 20px; border-bottom: 1px solid var(--border-color); 
            display: flex; justify-content: space-between; align-items: flex-end; 
        }
        .bag-title { font-size: 40px; font-weight: 600; letter-spacing: -0.5px; }
        .bag-subtitle { color: var(--text-secondary); font-size: 14px; }

        /* åˆ—è¡¨é¡¹å¡ç‰‡ */
        .bag-item { 
            background: var(--card-bg); border-radius: 18px; padding: 24px; margin-bottom: 24px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.02);
            display: grid; 
            grid-template-columns: 40px 100px 1fr auto; 
            gap: 24px; align-items: start;
            transition: all 0.2s ease;
            border: 2px solid transparent; 
            cursor: pointer; 
            position: relative;
        }
        .bag-item:hover { box-shadow: 0 6px 24px rgba(0,0,0,0.06); }
        .bag-item.selected { border-color: var(--accent-blue); background: #fbfbfd; }

        /* å¤é€‰æ¡† */
        .check-container { display: flex; align-items: center; justify-content: center; height: 100%; padding-top: 10px; pointer-events: none; }
        .custom-checkbox {
            appearance: none; width: 22px; height: 22px; 
            border: 1px solid #d2d2d7; border-radius: 50%; position: relative; transition: 0.2s;
            background-color: #fff;
        }
        .custom-checkbox:checked { background: var(--accent-blue); border-color: var(--accent-blue); }
        .custom-checkbox:checked::after {
            content: ''; position: absolute; top: 6px; left: 5px; width: 10px; height: 6px;
            border-left: 2px solid #fff; border-bottom: 2px solid #fff; transform: rotate(-45deg);
        }

        /* é¢„è§ˆå›¾åŒºåŸŸ (ç‰©ç†å¡ç‰‡) */
        .preview-box {
            width: 100px; height: 65px; border-radius: 8px; position: relative; overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); border: 1px solid rgba(0,0,0,0.05);
            background-size: cover; background-position: center;
        }

        /* --- æ–°å¢ï¼šSaaS ä¸“ç”¨é¢„è§ˆæ ·å¼ --- */
        .preview-box.saas-mode {
            display: flex; align-items: center; justify-content: center;
            font-size: 32px; color: #fff; text-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .saas-bg-pro { background: linear-gradient(135deg, #FF9A9E 0%, #FECFEF 100%); } /* Pro æŸ”å’Œæ¸å˜ */
        .saas-bg-ultra { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); } /* Ultra æ·±é‚ƒæ¸å˜ */
        .saas-bg-team { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); } /* Team æ¸…æ–°æ¸å˜ */
        
        /* å†…å®¹åŒº */
        .item-content { display: flex; flex-direction: column; gap: 4px; }
        .item-name { font-size: 19px; font-weight: 600; color: #1d1d1f; }
        .item-meta { font-size: 13px; color: var(--text-secondary); line-height: 1.4; }
        
        /* SaaS æ ‡ç­¾ (çº¯SaaSæ¨¡å¼) */
        .saas-badge {
            display: inline-flex; align-items: center; gap: 4px;
            font-size: 11px; font-weight: 600; color: #fff;
            padding: 2px 6px; border-radius: 4px; width: fit-content; margin-top: 4px;
        }

        /* SaaS æ†ç»‘æ˜¾ç¤º (ç‰©ç†å¡ç‰‡æ¨¡å¼) */
        .saas-bundle {
            margin-top: 8px; padding: 8px 12px; background: #f0f7ff; 
            border-radius: 8px; border: 1px solid rgba(0, 113, 227, 0.1);
            display: flex; align-items: center; gap: 8px; width: fit-content;
        }
        .saas-icon { color: var(--accent-blue); }
        .saas-text { font-size: 12px; font-weight: 500; color: #0071e3; }
        
        .saas-bundle.is-gift { background: #fff5e6; border-color: rgba(255, 149, 0, 0.2); }
        .saas-bundle.is-gift .saas-text { color: #d47e00; }
        .saas-bundle.is-gift .saas-icon { color: #ff9500; }

        /* è¯¦æƒ…æŠ˜å  */
        .details-toggle { 
            font-size: 12px; color: var(--accent-blue); cursor: pointer; margin-top: 8px; 
            display: inline-flex; align-items: center; gap: 4px; user-select: none;
            width: fit-content; z-index: 10; position: relative;
        }
        .details-content { 
            margin-top: 12px; padding: 12px; background: #f9f9f9; border-radius: 8px;
            font-size: 12px; color: #666; line-height: 1.6; display: none; cursor: default;
        }
        .details-content.show { display: block; animation: fadeIn 0.3s; }

        /* ä»·æ ¼ä¸æ“ä½œ */
        .item-action { display: flex; flex-direction: column; align-items: flex-end; gap: 16px; min-width: 120px; z-index: 10; position: relative; }
        .item-total-price { font-size: 20px; font-weight: 600; letter-spacing: -0.5px; }
        .item-unit-detail { font-size: 11px; color: #86868b; text-align: right; }

        .qty-box { 
            display: flex; align-items: center; background: #fff; border: 1px solid #d2d2d7; border-radius: 18px; padding: 2px;
            z-index: 20; 
        }
        .qty-btn { 
            width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; 
            color: var(--accent-blue); cursor: pointer; user-select: none; font-size: 16px; font-weight: 500;
        }
        .qty-btn:hover { background: #f5f5f7; border-radius: 50%; }
        .qty-val { width: 36px; text-align: center; font-size: 14px; font-weight: 600; color: #1d1d1f; border: none; background: transparent; }

        /* åº•éƒ¨å›ºå®šæ  */
        .checkout-bar {
            position: fixed; bottom: 0; left: 0; width: 100%; 
            background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(20px); 
            border-top: 1px solid #d2d2d7; padding: 20px; z-index: 100;
        }
        .checkout-inner {
            max-width: 980px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center;
        }
        .total-info { display: flex; flex-direction: column; }
        .total-label { font-size: 12px; color: var(--text-secondary); }
        .total-amount { font-size: 28px; font-weight: 700; color: #1d1d1f; letter-spacing: -0.5px; }
        
        .checkout-btn {
            background: #0071e3; color: #fff; padding: 12px 36px; border-radius: 980px; 
            font-size: 16px; font-weight: 500; border: none; cursor: pointer; transition: 0.2s;
            opacity: 1 !important;
        }
        .checkout-btn:hover { background: #0077ed; transform: scale(1.02); }

        .empty-state { text-align: center; padding: 120px 0; color: var(--text-secondary); }
        .empty-btn { 
            margin-top: 24px; display: inline-block; color: #0071e3; 
            text-decoration: none; font-weight: 500; font-size: 15px;
        }

        /* é¢œè‰²æ˜ å°„ (ç‰©ç†å¡) */
        .bg-jet-black, .bg-obsidian { background: #1d1d1f; }
        .bg-mica-white, .bg-ivory { background: #f5f5f7; border: 1px solid #e5e5e5; }
        .bg-tech-blue, .bg-aurora { background: linear-gradient(135deg, #00c6ff, #0072ff); }
        .bg-forest-green, .bg-mint { background: #228b22; }
        .bg-orange, .bg-sunset { background: #ff9500; }
        .bg-purple, .bg-violet { background: #800080; }
        .bg-bamboo { background: #e3cca8; }
        .bg-walnut { background: #5c4033; }
        .bg-clear { background: #ddd; border: 1px solid #ccc; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <nav class="fixed top-0 w-full z-50 glass-nav transition-all duration-300">
        <div class="max-w-[980px] mx-auto px-6 h-12 flex items-center justify-between">
            
            <div class="nav-content">
                <a href="index.html" class="nav-link" style="display: flex; align-items: center;">
                    <img src="Logo/lightBGver.png" alt="Linkly Logo" style="max-height: 28px; width: auto;"> 
                </a>
                <div style="display:flex; gap:24px;"></div>
            </div>

            <div class="hidden md:flex items-center gap-8 navbar-links">
                
                <div class="relative group h-full flex items-center">
                    <a href="Product.html" class="text-[#1d1d1f] text-[0.875rem] hover:text-[#0071e3] transition-colors py-4">
                        äº§å“
                    </a>
                    <div class="absolute top-[80%] left-1/2 -translate-x-1/2 pt-6 opacity-0 invisible group-hover:opacity-100 group-hover:visible group-hover:top-[60%] transition-all duration-300 ease-out z-50">
                        <div class="bg-white/90 backdrop-blur-xl border border-gray-200 rounded-xl shadow-xl p-2 min-w-[140px] flex flex-col gap-1 overflow-hidden">
                            <a href="Shop_General.html#essential" class="block px-4 py-2.5 text-[13px] text-[#1d1d1f] hover:bg-[#f5f5f7] hover:text-[#0071e3] rounded-lg transition-colors text-center whitespace-nowrap">
                                æ™ºèƒ½åç‰‡Â·åŸºç¡€ç‰ˆ
                            </a>
                            <a href="Shop_General.html#studio" class="block px-4 py-2.5 text-[13px] text-[#1d1d1f] hover:bg-[#f5f5f7] hover:text-[#0071e3] rounded-lg transition-colors text-center whitespace-nowrap">
                                æ™ºèƒ½åç‰‡Â·åŠå®šåˆ¶ç‰ˆ
                            </a>
                            <a href="Shop_General.html#bespoke" class="block px-4 py-2.5 text-[13px] text-[#1d1d1f] hover:bg-[#f5f5f7] hover:text-[#0071e3] rounded-lg transition-colors text-center whitespace-nowrap">
                                æ™ºèƒ½åç‰‡Â·å…¨å®šåˆ¶ç‰ˆ
                            </a>
                            <a href="Shop_General.html#saas" class="block px-4 py-2.5 text-[13px] text-[#1d1d1f] hover:bg-[#f5f5f7] hover:text-[#0071e3] rounded-lg transition-colors text-center whitespace-nowrap">
                                è½¯ä»¶ä¼šå‘˜
                            </a>
                        </div>
                    </div>
                </div>
                <a href="Product.html">Linkly åç‰‡</a> 
                <a href="AI_Detailed_2.html">Linkly AI</a> 
                <a href="B_Detailed_2black_WordPolish.html">Linkly ä¼ä¸šç‰ˆ</a> 
                
                <!-- <div class="relative group h-full flex items-center">
                    <span class="cursor-pointer py-4 text-[0.875rem] text-[#1d1d1f] group-hover:text-[#0071e3] group-hover:font-bold transition-all duration-300">
                        å®šä»·
                    </span>
                    <div class="absolute left-1/2 -translate-x-1/2 top-[3rem] pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform translate-y-2 group-hover:translate-y-0">
                        <div class="bg-white/90 backdrop-blur-xl border border-gray-200 rounded-xl overflow-hidden shadow-2xl w-32 flex flex-col p-1">
                            <a href="VIP_Compare_2.html" class="block w-full px-4 py-2.5 text-center text-[13px] text-[#1d1d1f] hover:bg-[#f5f5f7] rounded-lg hover:text-[#0071e3] transition-colors !font-normal">
                                è½¯ä»¶åº”ç”¨
                            </a>
                            <a href="Price_Card.html" class="block w-full px-4 py-2.5 text-center text-[13px] text-[#1d1d1f] hover:bg-[#f5f5f7] rounded-lg hover:text-[#0071e3] transition-colors !font-normal">
                                å®ä½“åç‰‡
                            </a>
                        </div>
                    </div>
                </div> -->
                <div class="relative group h-full flex items-center">
                    <a href="VIP_Compare_2.html" class="text-[#1d1d1f] text-[0.875rem] hover:text-[#0071e3] transition-colors py-4">
                        å®šä»·
                    </a>
                </div>

                <div class="relative group h-full flex items-center">
                    <a href="Download.html" class="text-[#1d1d1f] text-[0.875rem] hover:text-[#0071e3] transition-colors py-4">
                        æ”¯æŒ
                    </a>
                    <div class="absolute top-[80%] left-1/2 -translate-x-1/2 pt-6 opacity-0 invisible group-hover:opacity-100 group-hover:visible group-hover:top-[60%] transition-all duration-300 ease-out z-50">
                        <div class="bg-white/90 backdrop-blur-xl border border-gray-200 rounded-xl shadow-xl p-2 min-w-[140px] flex flex-col gap-1 overflow-hidden">
                            <a href="Download.html" class="block px-4 py-2.5 text-[13px] text-[#1d1d1f] hover:bg-[#f5f5f7] hover:text-[#0071e3] rounded-lg transition-colors text-center whitespace-nowrap">
                                åº”ç”¨ä¸‹è½½
                            </a>
                            <a href="User_Guide.html" class="block px-4 py-2.5 text-[13px] text-[#1d1d1f] hover:bg-[#f5f5f7] hover:text-[#0071e3] rounded-lg transition-colors text-center whitespace-nowrap">
                                ä½¿ç”¨è¯´æ˜
                            </a>
                            <a href="Tech_Spec.html" class="block px-4 py-2.5 text-[13px] text-[#1d1d1f] hover:bg-[#f5f5f7] hover:text-[#0071e3] rounded-lg transition-colors text-center whitespace-nowrap">
                                æŠ€æœ¯è¯¦æƒ…
                            </a>
                            <a href="QA.html" class="block px-4 py-2.5 text-[13px] text-[#1d1d1f] hover:bg-[#f5f5f7] hover:text-[#0071e3] rounded-lg transition-colors text-center whitespace-nowrap">
                                å¸¸è§é—®é¢˜
                            </a>
                            <a href="Contact_Us.html" class="block px-4 py-2.5 text-[13px] text-[#1d1d1f] hover:bg-[#f5f5f7] hover:text-[#0071e3] rounded-lg transition-colors text-center whitespace-nowrap">
                                è”ç³»æˆ‘ä»¬
                            </a>
                        </div>
                    </div>
                </div>

            </div>

            <div class="flex items-center gap-4 text-[0.875rem] navbar-btns">
                <!-- <a href="#" class="text-[#1d1d1f] hover:text-[#0071e3] transition-colors">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"/>
                    </svg>
                </a> -->
                
                <a href="ShopBag.html" class="text-[#1d1d1f] hover:text-[#0071e3] transition-colors relative group">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                </a>

                <a href="Shop_General.html" class="px-3 py-1 rounded-full font-medium transition-all duration-300 buy-btn">è´­ä¹°</a>
                
                <a href="#" class="hidden md:block text-[#1d1d1f] transition-all duration-300 login-btn">ç™»å½•</a>
            </div>
        </div>
    </nav>

    <div class="main-container">
        <div class="bag-header">
            <div>
                <h1 class="bag-title">è´­ç‰©è¢‹</h1>
                <span class="bag-subtitle" id="bag-count">å…± 0 ä»¶å•†å“</span>
            </div>
            <button onclick="clearBag(event)" class="text-xs text-gray-500 hover:text-red-500 underline" style="background:none; border:none; cursor:pointer;">æ¸…ç©ºè´­ç‰©è¢‹</button>
        </div>

        <div id="bag-list-container"></div>

        <div id="empty-message" class="empty-state" style="display: none;">
            <svg style="width: 48px; height: 48px; margin: 0 auto 16px; opacity: 0.2;" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg>
            <p>æ‚¨çš„è´­ç‰©è¢‹æ˜¯ç©ºçš„ã€‚</p>
            <a href="Shop_General.html" class="empty-btn">å»æµè§ˆäº§å“ â€º</a>
        </div>
    </div>

    <div class="checkout-bar">
        <div class="checkout-inner">
            <div class="total-info">
                <span class="total-label">å·²é€‰å•†å“æ€»è®¡</span>
                <span class="total-amount" id="footer-total">CNÂ¥ 0.00</span>
            </div>
            <button class="checkout-btn" id="checkout-btn" onclick="proceedToCheckout()">ç«‹å³ç»“è´¦</button>
        </div>
    </div>

<footer style="background-color: #f5f5f7; color: #6e6e73; font-size: 12px; line-height: 1.33337; font-weight: 400; padding: 0 20px; border-top: 1px solid #d2d2d7; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;">
    <div style="max-width: 980px; margin: 0 auto; padding: 40px 0 20px;">
        
        <div style="border-bottom: 1px solid #d2d2d7; padding-bottom: 20px; margin-bottom: 20px;">
            æ›´å¤šé€‰è´­æ–¹å¼ï¼š<a href="Shop_General.html" style="color: #0071e3; text-decoration: none;">å‰å¾€ Linkly å•†åº—</a>ï¼Œæˆ–å‘é€é‚®ä»¶è‡³ <a href="mailto:contact@linklyai.net" style="color: #0071e3; text-decoration: none;">contact@linklyai.net</a> ä¸æˆ‘ä»¬å–å¾—è”ç³»ã€‚
        </div>

        <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 20px;">
            
            <div style="display: flex; flex-direction: column; gap: 24px;">
                <div>
                    <h3 style="font-size: 12px; font-weight: 600; color: #1d1d1f; margin-bottom: 10px;">é€‰è´­ä¸äº†è§£</h3>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li style="margin-bottom: 8px;"><a href="Shop_General.html" style="color: #6e6e73; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">Linkly å•†åº—</a></li>
                        <li style="margin-bottom: 8px;"><a href="Price_Card.html#essentials" style="color: #6e6e73; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">Linkly åŸºç¡€ç‰ˆ</a></li>
                        <li style="margin-bottom: 8px;"><a href="Price_Card.html#studio" style="color: #6e6e73; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">Linkly åŠå®šåˆ¶ç‰ˆ</a></li>
                        <li style="margin-bottom: 8px;"><a href="Price_Card.html#bespoke" style="color: #6e6e73; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">Linkly å…¨å®šåˆ¶ç‰ˆ</a></li>
                    </ul>
                </div>
            </div>

            <div style="display: flex; flex-direction: column; gap: 24px;">
                <div>
                    <h3 style="font-size: 12px; font-weight: 600; color: #1d1d1f; margin-bottom: 10px;">è½¯ä»¶æœåŠ¡</h3>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li style="margin-bottom: 8px;"><a href="AI_Detailed_2.html" style="color: #6e6e73; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">Linkly AI</a></li>
                        <li style="margin-bottom: 8px;"><a href="VIP_Compare_2.html" style="color: #6e6e73; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">ä¼šå‘˜è®¡åˆ’</a></li>
                        <li style="margin-bottom: 8px;"><a href="Download.html" style="color: #6e6e73; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">åº”ç”¨ä¸‹è½½</a></li>
                        <li style="margin-bottom: 8px;"><a href="#" style="color: #6e6e73; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">ç½‘é¡µç™»å½•</a></li>
                    </ul>
                </div>
            </div>

            <div style="display: flex; flex-direction: column; gap: 24px;">
                <div>
                    <h3 style="font-size: 12px; font-weight: 600; color: #1d1d1f; margin-bottom: 10px;">å•†åŠ¡åº”ç”¨</h3>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li style="margin-bottom: 8px;"><a href="B_Detailed_2black_WordPolish.html" style="color: #6e6e73; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">Linkly ä¼ä¸šç‰ˆ</a></li>
                        <li style="margin-bottom: 8px;"><a href="Contact_Us.html" style="color: #6e6e73; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">ä¼ä¸šç‰ˆé‡‡è´­å’¨è¯¢</a></li>
                    </ul>
                </div>
            </div>

            <div style="display: flex; flex-direction: column; gap: 24px;">
                <div>
                    <h3 style="font-size: 12px; font-weight: 600; color: #1d1d1f; margin-bottom: 10px;">å®¢æˆ·æ”¯æŒ</h3>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li style="margin-bottom: 8px;"><a href="Tech_Spec.html" style="color: #6e6e73; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">æŠ€æœ¯è§„æ ¼å‚æ•°</a></li>
                        <li style="margin-bottom: 8px;"><a href="Contact_Us.html" style="color: #6e6e73; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">è”ç³»æ”¯æŒå›¢é˜Ÿ</a></li>
                        <li style="margin-bottom: 8px;"><a href="#" style="color: #6e6e73; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">è®¢å•çŠ¶æ€æŸ¥è¯¢</a></li>
                    </ul>
                </div>
            </div>

            <div style="display: flex; flex-direction: column; gap: 24px;">
                <div>
                    <h3 style="font-size: 12px; font-weight: 600; color: #1d1d1f; margin-bottom: 10px;">å…³äº Linkly</h3>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li style="margin-bottom: 8px;"><a href="Brand_Story.html" style="color: #6e6e73; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">å“ç‰Œæ•…äº‹</a></li>
                        <li style="margin-bottom: 8px;"><a href="Environment.html" style="color: #6e6e73; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">ç¯å¢ƒè´£ä»»</a></li>
                        <li style="margin-bottom: 8px;"><a href="Privacy.html" style="color: #6e6e73; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">éšç§ä¿æŠ¤</a></li>
                        <li style="margin-bottom: 8px;"><a href="mailto:contact@linklyai.net" style="color: #6e6e73; text-decoration: none; transition: color 0.2s;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">è”ç³»æˆ‘ä»¬</a></li>
                    </ul>
                </div>
            </div>

        </div>

        <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #d2d2d7; display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 10px;">
            <div style="color: #6e6e73;">Copyright Â© 2025 Linkly Inc. ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</div>
            <div style="display: flex; flex-wrap: wrap;">
                <a href="#" style="color: #6e6e73; text-decoration: none; margin-right: 10px; padding-right: 10px; border-right: 1px solid #d2d2d7;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">éšç§æ”¿ç­–</a>
                <a href="#" style="color: #6e6e73; text-decoration: none; margin-right: 10px; padding-right: 10px; border-right: 1px solid #d2d2d7;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">ä½¿ç”¨æ¡æ¬¾</a>
                <a href="#" style="color: #6e6e73; text-decoration: none; margin-right: 10px; padding-right: 10px; border-right: 1px solid #d2d2d7;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">é”€å”®æ”¿ç­–</a>
                <a href="#" style="color: #6e6e73; text-decoration: none;" onmouseover="this.style.color='#1d1d1f';this.style.textDecoration='underline'" onmouseout="this.style.color='#6e6e73';this.style.textDecoration='none'">æ³•å¾‹ä¿¡æ¯</a>
            </div>
            <a href="#" style="color: #1d1d1f; text-decoration: none; margin-left: auto;" onmouseover="this.style.textDecoration='underline'" onmouseout="this.style.textDecoration='none'">ä¸­å›½å¤§é™† (ç®€ä½“ä¸­æ–‡)</a>
        </div>

    </div>
</footer>

<script>
        window.addEventListener('load', () => {
                const currentPage = window.location.pathname;  // è·å–å½“å‰é¡µé¢è·¯å¾„
                const links = document.querySelectorAll('.navbar-links a');  // è·å–å¯¼èˆªæ ä¸­çš„æ‰€æœ‰é“¾æ¥
                
                links.forEach(link => {
                    // è·å– href å±æ€§
                    const href = link.getAttribute('href');
                    // å¦‚æœå½“å‰é¡µé¢è·¯å¾„åŒ…å«é“¾æ¥çš„ hrefï¼Œä¸” href ä¸ä¸ºç©ºæˆ–ä»…ä»…æ˜¯ #
                    if (href && href !== '#' && currentPage.includes(href)) {
                        link.classList.add('active');  // ç»™å½“å‰é“¾æ¥æ·»åŠ  active ç±»
                    } else {
                        link.classList.remove('active');  // å¦åˆ™ç§»é™¤ active ç±»
                    }
                });
            });

    const PRICING_RULES = {
        'Essential': { tiers: { 1: 24.90, 100: 19.90, 1000: 15.90, 10000: 12.90 } },
        'Studio_Business': {
            'pvc': { 1: 34.90, 100: 29.90, 1000: 24.90, 10000: 19.90 },
            'pvc-matte': { 1: 34.90, 100: 29.90, 1000: 24.90, 10000: 19.90 },
            'bamboo': { 1: 39.90, 100: 34.90, 1000: 29.90, 10000: 24.90 },
            'walnut': { 1: 49.90, 100: 44.90, 1000: 39.90, 10000: 34.90 }
        },
        'Studio_Happy': {
            'pvc': { 1: 34.90, 100: 29.90, 1000: 24.90, 10000: 19.90 },
            'pvc-matte': { 1: 34.90, 100: 29.90, 1000: 24.90, 10000: 19.90 },
            'bamboo': { 1: 39.90, 100: 34.90, 1000: 29.90, 10000: 24.90 },
            'clear': { 1: 44.90, 100: 39.90, 1000: 34.90, 10000: 29.90 }
        }
    };

    let cartItems = [];
    let selectedIds = new Set(); 

    document.addEventListener('DOMContentLoaded', () => {
        loadCart();
    });

    function loadCart() {
        const stored = localStorage.getItem('linkly_cart');
        if (stored) {
            try {
                cartItems = JSON.parse(stored);
                cartItems.sort((a, b) => b.timestamp - a.timestamp);
            } catch (e) {
                cartItems = [];
            }
        }
        renderCart();
    }

    function getUnitPrice(item) {
        // å¦‚æœæ˜¯çº¯ SaaSï¼Œç¡¬ä»¶å•ä»·ä¸º 0
        if (item.priceStructure === 'saas_only') return 0;

        let tiers;
        const pageKey = item.sourcePage || 'Essential'; 
        const mat = item.config.material || 'pvc';

        if (pageKey === 'Essential') {
            tiers = PRICING_RULES['Essential'].tiers;
        } else if (PRICING_RULES[pageKey] && PRICING_RULES[pageKey][mat]) {
            tiers = PRICING_RULES[pageKey][mat];
        } else {
            tiers = { 1: 34.90, 100: 29.90, 1000: 24.90, 10000: 19.90 };
        }
        
        const qty = item.qty || 1;
        let finalPrice = tiers[1];
        if (qty >= 10000) finalPrice = tiers[10000];
        else if (qty >= 1000) finalPrice = tiers[1000];
        else if (qty >= 100) finalPrice = tiers[100];
        return finalPrice;
    }

    window.handleRowClick = function(event, id) {
        if (event.target.closest('.qty-btn') || 
            event.target.closest('.details-toggle') || 
            event.target.closest('button')) {
            return;
        }
        toggleSelect(id);
    };

    window.toggleSelect = function(id) {
        if (selectedIds.has(id)) selectedIds.delete(id); 
        else selectedIds.add(id);
        renderCart();
    };

    function renderCart() {
        const container = document.getElementById('bag-list-container');
        const emptyMsg = document.getElementById('empty-message');
        const countLabel = document.getElementById('bag-count');

        container.innerHTML = '';
        countLabel.textContent = `å…± ${cartItems.length} ä»¶å•†å“`;

        if (cartItems.length === 0) {
            emptyMsg.style.display = 'block';
            updateFooterTotal();
            return;
        } else {
            emptyMsg.style.display = 'none';
        }

        cartItems.forEach(item => {
            const unitPrice = getUnitPrice(item);
            let itemHtml = '';
            let itemTotal = 0;
            const isChecked = selectedIds.has(item.id) ? 'checked' : '';
            const rowSelectedClass = isChecked ? 'selected' : '';

            // ================== åˆ†æ”¯ 1: çº¯ SaaS å•†å“æ¸²æŸ“ ==================
            if (item.priceStructure === 'saas_only') {
                const planName = item.config.materialName; // å¦‚ "Pro ä¸“ä¸šç‰ˆ"
                const saasPriceTotal = item.saasList[0].price; // æ€»ä»·
                itemTotal = saasPriceTotal;

                // å†³å®š SaaS èƒŒæ™¯è‰²å’Œå›¾æ ‡
                let saasClass = 'saas-bg-pro';
                let saasIcon = 'âš¡ï¸';
                if (planName.includes('Ultra')) { saasClass = 'saas-bg-ultra'; saasIcon = 'ğŸ§ '; }
                if (planName.includes('Team')) { saasClass = 'saas-bg-team'; saasIcon = 'ğŸ‘¥'; }

                const detailsHtml = `
                    <p><strong>è®¢é˜…è¯¦æƒ…ï¼š</strong></p>
                    <ul style="list-style:disc; padding-left:16px; margin-top:4px;">
                        <li>è®¡åˆ’: ${planName}</li>
                        <li>æ•°é‡: ${item.qty} å¸­ä½/ä»½</li>
                        <li>å‘¨æœŸ: æŒ‰æœˆè®¢é˜…</li>
                        <li>æ·»åŠ æ—¶é—´: ${new Date(item.timestamp).toLocaleString('zh-CN')}</li>
                    </ul>
                `;

                itemHtml = `
                <div class="bag-item ${rowSelectedClass}" id="row-${item.id}" onclick="handleRowClick(event, '${item.id}')">
                    <div class="check-container"><input type="checkbox" class="custom-checkbox" ${isChecked}></div>
                    
                    <div class="preview-box saas-mode ${saasClass}">
                        <span>${saasIcon}</span>
                    </div>

                    <div class="item-content">
                        <div class="item-name">${item.productName}</div>
                        <div class="item-meta" style="color: var(--accent-blue); font-weight:500;">
                            ${planName}
                        </div>
                        <div style="font-size:12px; color:#86868b; margin-top:4px;">
                            çº¯è½¯ä»¶è®¢é˜… Â· æ— éœ€ç‰©æµ
                        </div>
                        
                        <div class="details-toggle" onclick="toggleDetails('${item.id}')">
                            å±•å¼€è¯¦æƒ… <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>
                        </div>
                        <div class="details-content" id="details-${item.id}">${detailsHtml}</div>
                    </div>

                    <div class="item-action">
                        <div style="text-align:right;">
                            <div class="item-total-price">CNÂ¥ ${itemTotal.toFixed(2)}</div>
                            <div class="item-unit-detail">
                                è®¢é˜…è´¹: CNÂ¥ ${itemTotal.toFixed(2)} / æœˆ
                            </div>
                        </div>
                        
                        <div class="qty-box">
                            <div class="qty-btn" onclick="updateQty('${item.id}', -1)">âˆ’</div>
                            <input type="text" class="qty-val" value="${item.qty}" readonly>
                            <div class="qty-btn" onclick="updateQty('${item.id}', 1)">+</div>
                        </div>
                        
                        <button onclick="removeItem(event, '${item.id}')" class="text-xs text-gray-400 hover:text-red-500 underline bg-transparent border-none cursor-pointer mt-2">ç§»é™¤å•†å“</button>
                    </div>
                </div>`;

            } 
            // ================== åˆ†æ”¯ 2: å®ä½“å¡ (+æ†ç»‘SaaS) æ¸²æŸ“ ==================
            else {
                const hardwareTotal = unitPrice * item.qty;
                let totalSaasPrice = 0;
                let saasHtml = '';
                let saasDetailsText = [];
                const saasList = item.saasList || (item.saas ? [item.saas] : []);

                saasList.forEach(saasItem => {
                    if (!saasItem || (saasItem.name === 'free' && (!saasItem.display || !saasItem.display.includes('èµ é€')))) return;
                    
                    const price = saasItem.price || 0;
                    const isGift = (price === 0);
                    totalSaasPrice += price;

                    const label = isGift ? 'èµ é€ä¼šå‘˜' : 'åŠ è´­ä¼šå‘˜';
                    const priceStr = isGift ? 'å…è´¹' : `CNÂ¥ ${price.toFixed(2)}`;
                    const giftClass = isGift ? 'is-gift' : '';
                    const iconPath = isGift 
                        ? "M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM14 11a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"
                        : "M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z";

                    saasHtml += `
                        <div class="saas-bundle ${giftClass}" style="margin-bottom:6px;">
                            <svg class="w-4 h-4 saas-icon" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="${iconPath}" clip-rule="evenodd"/></svg>
                            <span class="saas-text">${label}: ${saasItem.display} (${priceStr})</span>
                        </div>
                    `;
                    saasDetailsText.push(`${saasItem.display}`);
                });

                itemTotal = hardwareTotal + totalSaasPrice;
                let colorClass = item.config.color || 'bg-jet-black';

                const customInfo = item.custom || {};
                const detailsHtml = `
                    <p><strong>å®šåˆ¶å‚æ•°ï¼š</strong></p>
                    <ul style="list-style:disc; padding-left:16px; margin-top:4px;">
                        <li>æè´¨: ${item.config.materialName}</li>
                        <li>é¢œè‰²: ${item.config.colorName}</li>
                        <li>å›¾æ¡ˆ: ${item.config.patternName}</li>
                        <li>å§“å: ${customInfo.name || '-'}</li>
                        <li>ä¼šå‘˜: ${saasDetailsText.length > 0 ? saasDetailsText.join(' + ') : 'æ— '}</li>
                        <li>æ·»åŠ æ—¶é—´: ${new Date(item.timestamp).toLocaleString('zh-CN')}</li>
                    </ul>
                `;

                itemHtml = `
                <div class="bag-item ${rowSelectedClass}" id="row-${item.id}" onclick="handleRowClick(event, '${item.id}')">
                    <div class="check-container"><input type="checkbox" class="custom-checkbox" ${isChecked}></div>
                    
                    <div class="preview-box ${colorClass}">
                        <div style="position:absolute;bottom:4px;left:6px;color:rgba(255,255,255,0.6);font-size:8px;font-weight:bold;">Linkly</div>
                    </div>

                    <div class="item-content">
                        <div class="item-name">${item.productName}</div>
                        <div class="item-meta">${item.config.materialName} Â· ${item.config.colorName}</div>
                        <div style="margin-top:8px; display:flex; flex-direction:column;">${saasHtml}</div>
                        <div class="details-toggle" onclick="toggleDetails('${item.id}')">
                            å±•å¼€è¯¦æƒ… <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>
                        </div>
                        <div class="details-content" id="details-${item.id}">${detailsHtml}</div>
                    </div>

                    <div class="item-action">
                        <div style="text-align:right;">
                            <div class="item-total-price">CNÂ¥ ${itemTotal.toFixed(2)}</div>
                            <div class="item-unit-detail">
                                å¡ç‰‡å•ä»·: CNÂ¥ ${unitPrice.toFixed(2)} Ã— ${item.qty}<br>
                                ${totalSaasPrice > 0 ? '+ ä¼šå‘˜: CNÂ¥ ' + totalSaasPrice.toFixed(2) : ''}
                            </div>
                        </div>
                        <div class="qty-box">
                            <div class="qty-btn" onclick="updateQty('${item.id}', -1)">âˆ’</div>
                            <input type="text" class="qty-val" value="${item.qty}" readonly>
                            <div class="qty-btn" onclick="updateQty('${item.id}', 1)">+</div>
                        </div>
                        <button onclick="removeItem(event, '${item.id}')" class="text-xs text-gray-400 hover:text-red-500 underline bg-transparent border-none cursor-pointer mt-2">ç§»é™¤å•†å“</button>
                    </div>
                </div>`;
            }

            container.insertAdjacentHTML('beforeend', itemHtml);
        });

        updateFooterTotal();
    }

    // äº¤äº’å‡½æ•°
    window.updateQty = function(id, delta) {
        const idx = cartItems.findIndex(i => i.id === id);
        if (idx === -1) return;
        let newQty = cartItems[idx].qty + delta;
        
        // å›¢é˜Ÿç‰ˆè‡³å°‘ 5 äºº
        if (cartItems[idx].priceStructure === 'saas_only' && cartItems[idx].config.materialName.includes('Team')) {
            if (newQty < 5) {
                alert("Team å›¢é˜Ÿç‰ˆè‡³å°‘éœ€è®¢é˜… 5 ä¸ªå¸­ä½");
                return;
            }
        }
        if (newQty < 1) newQty = 1;
        
        // å¯¹äºçº¯ SaaSï¼Œéœ€è¦åŒæ—¶æ›´æ–°ä»·æ ¼ (å› ä¸ºæˆ‘ä»¬å­˜çš„æ˜¯æ€»ä»·ä½œä¸ºå•ä»·åœ¨ saasList é‡Œï¼Œè¿™é‡Œä¸ºäº†ç®€å•ï¼Œé‡æ–°è®¡ç®— saasList[0].price)
        if (cartItems[idx].priceStructure === 'saas_only') {
             // é€†å‘ç®—å‡ºå•ä»· (å½“å‰æ€»ä»· / å½“å‰æ•°é‡) -> è¿™æ˜¯ä¸€ä¸ª hackï¼Œæœ€å¥½æ˜¯åœ¨å­˜çš„æ—¶å€™å°±å­˜å•ä»·ã€‚
             // å®é™…ä¸Šæˆ‘ä»¬åœ¨ SaaS_Purchase é‡Œå­˜çš„æ˜¯ï¼š price: (plan.price * currentQty)
             // æˆ‘ä»¬éœ€è¦æ¢å¤åŸºç¡€å•ä»·ã€‚
             // æ›´å¥½çš„åšæ³•ï¼šç›´æ¥é‡æ–°è®¡ç®—ã€‚
             const basePrice = cartItems[idx].saasList[0].price / cartItems[idx].qty;
             cartItems[idx].saasList[0].price = basePrice * newQty;
             cartItems[idx].saasList[0].display = cartItems[idx].saasList[0].display.split(' x ')[0] + ' x ' + newQty;
        }

        cartItems[idx].qty = newQty;
        saveCart();
        renderCart();
    };

    window.removeItem = function(event, id) {
        event.stopPropagation();
        if (confirm('ç¡®å®šè¦ä»è´­ç‰©è¢‹ç§»é™¤æ­¤å•†å“å—ï¼Ÿ')) {
            cartItems = cartItems.filter(i => i.id !== id);
            selectedIds.delete(id);
            saveCart();
            renderCart();
        }
    };

    window.clearBag = function(event) {
        event.stopPropagation();
        if (cartItems.length === 0) return;
        if (confirm('ç¡®å®šæ¸…ç©ºè´­ç‰©è¢‹å—ï¼Ÿ')) {
            cartItems = [];
            selectedIds.clear();
            saveCart();
            renderCart();
        }
    };

    window.toggleDetails = function(id) {
        const el = document.getElementById(`details-${id}`);
        if (el) {
            el.classList.toggle('show');
            const btn = el.previousElementSibling;
            if(el.classList.contains('show')) {
                btn.innerHTML = `æ”¶èµ·è¯¦æƒ… <svg style="transform:rotate(180deg)" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>`;
            } else {
                btn.innerHTML = `å±•å¼€è¯¦æƒ… <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>`;
            }
        }
    };

    function saveCart() { localStorage.setItem('linkly_cart', JSON.stringify(cartItems)); }
    
    function updateFooterTotal() {
        let total = 0;
        let count = 0;
        cartItems.forEach(item => {
            if (selectedIds.has(item.id)) {
                if (item.priceStructure === 'saas_only') {
                    total += item.saasList[0].price; // çº¯ SaaS ç›´æ¥å–å­˜å‚¨çš„æ€»ä»·
                } else {
                    const unitPrice = getUnitPrice(item);
                    let totalSaasPrice = 0;
                    item.saasList.forEach(s => totalSaasPrice += (s.price || 0));
                    total += (unitPrice * item.qty) + totalSaasPrice;
                }
                count++;
            }
        });
        document.getElementById('footer-total').textContent = `CNÂ¥ ${total.toFixed(2)}`;
        const btn = document.getElementById('checkout-btn');
        btn.textContent = count > 0 ? `ç«‹å³ç»“è´¦ (${count})` : 'ç«‹å³ç»“è´¦';
    }

    window.proceedToCheckout = function() {
        if (selectedIds.size === 0) {
            alert("è¯·å…ˆå‹¾é€‰éœ€è¦ç»“è´¦çš„å•†å“");
            return;
        }
        const checkoutItems = cartItems.filter(item => selectedIds.has(item.id));
        
        // è®¡ç®—æœ€ç»ˆæ€»ä»·
        let totalAmount = 0;
        checkoutItems.forEach(item => {
             if (item.priceStructure === 'saas_only') {
                 totalAmount += item.saasList[0].price;
             } else {
                 const unitPrice = getUnitPrice(item);
                 let totalSaasPrice = 0;
                 item.saasList.forEach(s => totalSaasPrice += (s.price || 0));
                 totalAmount += (unitPrice * item.qty) + totalSaasPrice;
             }
        });

        const checkoutData = {
            items: checkoutItems,
            total: totalAmount,
            timestamp: Date.now()
        };
        localStorage.setItem('linkly_checkout_pending', JSON.stringify(checkoutData));
        window.location.href = 'Checkout.html'; // è·³è½¬åˆ°ç»Ÿä¸€ç»“è´¦é¡µ
    };
</script>
</body>
</html>